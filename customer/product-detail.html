<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Chi tiết</title>
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
<main id="detail"></main>
<script>
const id=new URLSearchParams(location.search).get('code')
fetch('http://localhost:3000/api/products/'+id)
.then(r=>r.json()).then(p=>{
  detail.innerHTML=`
  <h2>${p.productName}</h2>
  <p>${p.productDescription}</p>
  <p>Giá: ${p.MSRP}₫</p>
  <button id="btn">Thêm vào giỏ</button>`
  document.getElementById('btn').onclick=()=>{
    let c=JSON.parse(localStorage.getItem('cart')||'[]')
    const f=c.find(i=>i.code==p.productCode)
    f?f.qty++:c.push({code:p.productCode,name:p.productName,price:p.MSRP,qty:1})
    localStorage.setItem('cart',JSON.stringify(c))
  }
})
</script>
</body>
</html>
